(this.webpackJsonpblog=this.webpackJsonpblog||[]).push([[0],{29:function(n,t,e){},36:function(n,t,e){"use strict";e.r(t);var c=e(0),r=e(1),a=e(20),o=e.n(a),i=(e(29),e(4)),s=e(5),u=e(2),j="#47717d",b="#3b5e68",l="#9ddbe6",d="#F44335",h="#f5f5f5",x="@media (max-width: 381px)",O="80px",f="60px",p="30px",v="10px",g="24px",m="20px",w="16px",y="12px",k={shadowDark:"0px 1px 4px ".concat(b,"30"),shadowLight:"0px 1px 4px ".concat(l,"80"),block:"\n    display: block;\n    color: ".concat(b,";\n    width: 100%;\n    padding: 10px;\n    border: 3px solid ").concat(b,";\n    background: transparent;\n    box-shadow: 0px 1px 4px ").concat(b,"30;\n  ")},S=e(3),C=e(7);function z(){var n=Object(u.a)(["\n  color: ",";\n  font-size: ",";\n  font-weight: bold;\n  text-decoration: none;\n  padding: 0 ",";\n"]);return z=function(){return n},n}function A(){var n=Object(u.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 100%;\n  color: ",";\n  height: ",";\n  "," {\n    height: ",";\n    flex-direction: column;\n  }\n"]);return A=function(){return n},n}function D(){var n=Object(u.a)(["\n  max-width: 960px;\n  margin: 0 auto;\n"]);return D=function(){return n},n}function E(){var n=Object(u.a)(["\n  width: 100%;\n  background: ",";\n  box-shadow: ",";\n  position: fixed;\n  z-index: 2;\n  top: 0;\n"]);return E=function(){return n},n}var L=S.a.div(E(),h,k.shadowDark),J=S.a.div(D()),P=S.a.div(A(),b,f,x,O),F=Object(S.a)(C.b)(z(),j,g,v);function N(){var n=Object(u.a)(["\n  text-align: center;\n"]);return N=function(){return n},n}function T(){var n=Object(u.a)(["\n  z-index: 1;\n  ","\n  font-size: ",";\n  font-weight: bold;\n  position: relative;\n  box-shadow: ",";\n  &:hover {\n    color: ",';\n    font-weight: normal;\n  }\n  &::before {\n    z-index: -1;\n    content: "";\n    display: block;\n    background: ',";\n    transition: width 0.3s ease-in-out;\n    position: absolute;\n    height: 100%;\n    width: 0;\n    left: 0;\n    top: 0;\n  }\n  &:hover::before {\n    width: 100%;\n  }\n  &:active {\n    box-shadow: none;\n  }\n"]);return T=function(){return n},n}function B(){var n=Object(u.a)(["\n  background: none;\n  border: none;\n  display: inline-block;\n  cursor: pointer;\n  text-decoration: none;\n  color: ",';\n  font-size: inherit;\n  font-weight: bold;\n  padding: 10px;\n  & span {\n    z-index: 1;\n    position: relative;\n  }\n  & span::before {\n    z-index: -1;\n    content: "";\n    display: block;\n    background: ',";\n    transition: width 0.3s ease-in-out;\n    position: absolute;\n    height: 50%;\n    width: 0;\n    left: 10%;\n    bottom: -10%;\n  }\n  &:hover span::before,\n  &.active span::before,\n  &:focus span::before {\n    width: 100%;\n  }\n"]);return B=function(){return n},n}var I=S.a.button(B(),j,l);function U(n){var t=n.isActive,e=n.content;return Object(c.jsx)(I,{className:t?"active":"",children:Object(c.jsx)("span",{children:e})})}var R=S.a.button(T(),k.block,m,k.shadowDark,h,b);function H(n){var t=n.to,e=n.isExact,r=n.label,a=Object(s.j)({path:t,exact:e});return Object(c.jsx)(C.b,{to:t,children:Object(c.jsx)(U,{isActive:!!a,content:r})})}var M=S.a.div(N()),_=Object(r.createContext)(null),G="token",Y=function(n){return localStorage.setItem(G,n)},Z=function(){return localStorage.getItem(G)};function q(){var n=Object(s.h)(),t=Object(s.g)(),e=Object(r.useContext)(_),a=e.getApi,o=e.user,i=e.setUser;return Object(c.jsx)(L,{children:Object(c.jsx)(J,{children:Object(c.jsxs)(P,{children:[Object(c.jsx)(F,{to:"/",children:Object(c.jsx)(U,{isActive:!0,content:"ZoeHYH"})}),Object(c.jsxs)("div",{children:[Object(c.jsx)(H,{to:"/list",isExact:!1,label:"\u6587\u7ae0\u5217\u8868"}),Object(c.jsx)(H,{to:"/about",isExact:!1,label:"\u95dc\u65bc"}),o&&Object(c.jsx)(H,{to:"/post",isExact:!0,label:"\u767c\u5e03\u6587\u7ae0"}),a&&!o&&Object(c.jsx)(H,{to:"/login",isExact:!0,label:"\u767b\u5165"}),a&&!o&&Object(c.jsx)(H,{to:"/register",isExact:!0,label:"\u8a3b\u518a"}),o&&Object(c.jsx)("span",{onClick:function(){Y(""),i(null),"/post"===n.pathname&&t.push("/")},children:Object(c.jsx)(U,{isActive:!1,content:"\u767b\u51fa"})})]})]})})})}var K="https://student-json-api.lidemy.me",Q=function(){return fetch("".concat(K,"/posts?_sort=createdAt&_order=desc")).then((function(n){return n.json()}))},V=function(){var n=Z();return fetch("".concat(K,"/me"),{headers:{authorization:"Bearer ".concat(n)}}).then((function(n){return n.json()}))};function W(){var n=Object(u.a)(["\n  display: block;\n  text-decoration: none;\n  &:hover {\n    box-shadow: ",";\n  }\n"]);return W=function(){return n},n}function X(){var n=Object(u.a)(["\n  color: ",";\n  padding: ",";\n  max-width: 600px;\n  margin: 0 auto;\n  & + & {\n    border-top: 1px solid ",";\n  }\n  & h3 {\n    color: ",";\n    font-size: ",";\n    font-weight: bold;\n    margin: 0 0 ",";\n  }\n  & span {\n    display: block;\n    font-size: ",";\n  }\n  & p {\n    font-size: ",";\n    margin: "," 0;\n    letter-spacing: 2px;\n  }\n"]);return X=function(){return n},n}var $=S.a.div(X(),j,v,b+"30",b,m,v,y,w,v),nn=Object(S.a)($)(W(),k.shadowDark);function tn(){var n=Object(u.a)(["\n  color: ",";\n  margin-top: ",";\n  padding: 15vh ",";\n  display: flex;\n  justify-content: center;\n  position: relative;\n  "," {\n    margin-top: ",";\n  }\n"]);return tn=function(){return n},n}function en(){var n=Object(u.a)(["\n  color: ",";\n  margin-top: ",";\n  padding: "," ",";\n  "," {\n    margin-top: ",";\n  }\n"]);return en=function(){return n},n}var cn=S.a.div(en(),b,f,v,v,x,O),rn=S.a.div(tn(),b,f,v,x,O);function an(n){var t=n.post;return Object(c.jsxs)(nn,{as:C.b,to:"/article-".concat(t.id),children:[Object(c.jsx)("h3",{children:t.title}),Object(c.jsx)("span",{children:new Date(t.createdAt).toLocaleString()})]})}function on(){var n=Object(r.useState)([]),t=Object(i.a)(n,2),e=t[0],a=t[1];return Object(r.useEffect)((function(){Q().then((function(n){return a(n)}))}),[]),Object(c.jsx)(cn,{children:e.map((function(n){return Object(c.jsx)(an,{post:n},n.id)}))})}function sn(n){var t=n.post;return Object(c.jsxs)(nn,{as:C.b,to:"/article-".concat(t.id),children:[Object(c.jsx)("h3",{children:t.title}),Object(c.jsx)("span",{children:new Date(t.createdAt).toLocaleString()}),Object(c.jsx)("p",{children:t.body})]})}function un(){var n=Object(s.i)().page,t=Object(r.useState)([]),e=Object(i.a)(t,2),a=e[0],o=e[1],u=Object(r.useRef)();return Object(r.useEffect)((function(){Q().then((function(t){u.current=Math.ceil(t.length/10),o(t.slice(10*(n-1),10*n))}))}),[n]),Object(c.jsxs)(cn,{children:[a.map((function(n){return Object(c.jsx)(sn,{post:n},n.id)})),Object(c.jsx)(M,{children:new Array(u.current).fill("").map((function(n,t){return Object(c.jsx)(H,{to:"/list/".concat(t+1),isExact:!1,label:"".concat(t+1)},t)}))})]})}function jn(){var n=Object(s.i)().id,t=Object(r.useState)({}),e=Object(i.a)(t,2),a=e[0],o=e[1];return Object(r.useEffect)((function(){(function(n){return fetch("".concat(K,"/posts?id=").concat(n)).then((function(n){return n.json()}))})(n).then((function(n){return o(n[0])}))}),[n]),Object(c.jsx)(cn,{children:Object(c.jsxs)($,{children:[Object(c.jsx)("h3",{children:a.title}),Object(c.jsx)("span",{children:new Date(a.createdAt).toLocaleString()}),Object(c.jsx)("p",{children:a.body})]})})}var bn="\u95dc\u65bc\u9019\u500b\u90e8\u843d\u683c",ln='\n    \u9019\u500b\u90e8\u843d\u683c SPA \u4f7f\u7528 React Router DOM \u9019\u5957 Library \u5be6\u4f5c\u524d\u7aef\u8def\u7531\u3002\n    \u8a3b\u518a\u5f8c\uff0c\u5bc6\u78bc\u90fd\u6703\u662f "Lidemy"\u3002\n  ';function dn(){return Object(c.jsx)(cn,{children:Object(c.jsxs)($,{children:[Object(c.jsx)("h3",{children:bn}),Object(c.jsx)("p",{children:ln})]})})}function hn(){var n=Object(u.a)(["\n  display: block;\n  width: 100%;\n  &:last-of-type {\n    margin-bottom: 30px;\n  }\n  & label {\n    display: block;\n    color: ",";\n    font-size: ",";\n    font-weight: bold;\n    margin: ",";\n    ","\n  }\n  & input,\n  & textarea {\n    ","\n    font-size: ",";\n    font-family: initial;\n    ","\n  }\n  & textarea {\n    height: 50vh;\n  }\n"]);return hn=function(){return n},n}var xn=S.a.div(hn(),j,w,v,(function(n){return n.alert?"color: ".concat(d):""}),k.block,m,(function(n){return n.alert?"border: 3px solid ".concat(d):""}));function On(n){var t=n.content,e=n.type,r=n.name,a=n.alert,o=n.value,i=n.handleOnChange;return Object(c.jsxs)(xn,{alert:a,children:[Object(c.jsx)("label",{htmlFor:r,children:t}),"textarea"===e?Object(c.jsx)("textarea",{id:r,value:o,onChange:function(n){var t=n.target;return i(t.value)}}):Object(c.jsx)("input",{type:e,id:r,value:o,onChange:function(n){var t=n.target;return i(t.value)}})]})}function fn(){var n=Object(u.a)(["\n  max-width: 600px;\n  margin: 0 auto;\n  position: relative;\n"]);return fn=function(){return n},n}function pn(){var n=Object(u.a)(["\n  width: 320px;\n  position: relative;\n"]);return pn=function(){return n},n}var vn=S.a.form(pn()),gn=S.a.form(fn());function mn(){var n=Object(u.a)(["\n  color: ",";\n  margin: 0;\n  text-align: center;\n  display: block;\n  position: absolute;\n  bottom: ",";\n  right: 0;\n  left: 0;\n"]);return mn=function(){return n},n}var wn=S.a.p(mn(),d,p);function yn(){var n=Object(s.g)(),t=Object(r.useState)(""),e=Object(i.a)(t,2),a=e[0],o=e[1],u=Object(r.useState)(""),j=Object(i.a)(u,2),b=j[0],l=j[1],d=Object(r.useState)(null),h=Object(i.a)(d,2),x=h[0],O=h[1];return Object(c.jsxs)(cn,{children:[Object(c.jsx)(wn,{children:x}),Object(c.jsxs)(gn,{onSubmit:function(t){(function(n,t){var e=Z();return fetch("".concat(K,"/posts"),{method:"POST",headers:{"content-type":"application/json",authorization:"Bearer ".concat(e)},body:JSON.stringify({title:n,body:t})}).then((function(n){return n.json()}))})(a,b).then((function(t){if(0===t.ok)return O(t.message);n.push("/")})),t.preventDefault()},children:[Object(c.jsx)(On,{content:"\u6a19\u984c",type:"text",name:"title",alert:!!x,value:a,handleOnChange:function(n){return o(n)}}),Object(c.jsx)(On,{content:"\u5167\u6587",type:"textarea",name:"body",alert:!!x,value:b,handleOnChange:function(n){return l(n)}}),Object(c.jsx)(R,{children:"\u767c\u5e03"})]})]})}function kn(){var n=Object(r.useContext)(_).setUser,t=Object(r.useState)(""),e=Object(i.a)(t,2),a=e[0],o=e[1],u=Object(r.useState)(""),j=Object(i.a)(u,2),b=j[0],l=j[1],d=Object(r.useState)(null),h=Object(i.a)(d,2),x=h[0],O=h[1],f=Object(s.g)();return Object(c.jsxs)(rn,{children:[Object(c.jsx)(wn,{children:x}),Object(c.jsxs)(vn,{onSubmit:function(t){(function(n,t){return fetch("".concat(K,"/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:n,password:t})}).then((function(n){return n.json()}))})(a,b).then((function(t){if(0===t.ok)return O(t.message);Y(t.token),V().then((function(t){if(1!==t.ok)return Y(null),O(JSON.stringify(t));n(t.data),f.push("/")}))})),t.preventDefault()},children:[Object(c.jsx)(On,{content:"\u5e33\u865f",type:"text",name:"username",alert:!!x,value:a,handleOnChange:function(n){return o(n)}}),Object(c.jsx)(On,{content:"\u5bc6\u78bc",type:"password",name:"password",alert:!!x,value:b,handleOnChange:function(n){return l(n)}}),Object(c.jsx)(R,{children:"\u767b\u5165"})]})]})}function Sn(){var n=Object(r.useContext)(_).setUser,t=Object(r.useState)(""),e=Object(i.a)(t,2),a=e[0],o=e[1],u=Object(r.useState)(""),j=Object(i.a)(u,2),b=j[0],l=j[1],d=Object(r.useState)(""),h=Object(i.a)(d,2),x=h[0],O=h[1],f=Object(r.useState)(null),p=Object(i.a)(f,2),v=p[0],g=p[1],m=Object(s.g)();return Object(c.jsxs)(rn,{children:[Object(c.jsx)(wn,{children:v}),Object(c.jsxs)(vn,{onSubmit:function(t){(function(n,t,e){return fetch("".concat(K,"/register"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({nickname:n,username:t,password:e})}).then((function(n){return n.json()}))})(a,b,x).then((function(t){if(0===t.ok)return g(t.message);Y(t.token),V().then((function(t){if(1!==t.ok)return Y(null),g(JSON.stringify(t));n(t.data),m.push("/")}))})),t.preventDefault()},children:[Object(c.jsx)(On,{content:"\u66b1\u7a31",type:"text",name:"nickname",alert:!!v,value:a,handleOnChange:function(n){return o(n)}}),Object(c.jsx)(On,{content:"\u5e33\u865f",type:"text",name:"username",alert:!!v,value:b,handleOnChange:function(n){return l(n)}}),Object(c.jsx)(On,{content:"\u5bc6\u78bc",type:"password",name:"password",alert:!!v,value:x,handleOnChange:function(n){return O(n)}}),Object(c.jsx)(R,{children:"\u8a3b\u518a"})]})]})}function Cn(){var n=Object(r.useState)(!1),t=Object(i.a)(n,2),e=t[0],a=t[1],o=Object(r.useState)(null),u=Object(i.a)(o,2),j=u[0],b=u[1];return Object(r.useEffect)((function(){Z()&&V().then((function(n){n.ok&&b(n.data)})),a(!0)}),[]),Object(c.jsx)(_.Provider,{value:{getApi:e,setGetApi:a,user:j,setUser:b},children:Object(c.jsxs)(C.a,{children:[Object(c.jsx)(q,{}),Object(c.jsxs)(s.d,{children:[Object(c.jsx)(s.b,{exact:!0,path:"/",children:Object(c.jsx)(on,{})}),Object(c.jsx)(s.b,{exact:!0,path:"/list",children:Object(c.jsx)(s.a,{to:"/list/1"})}),Object(c.jsx)(s.b,{exact:!0,path:"/list/:page",children:Object(c.jsx)(un,{})}),Object(c.jsx)(s.b,{exact:!0,path:"/article-:id",children:Object(c.jsx)(jn,{})}),Object(c.jsx)(s.b,{exact:!0,path:"/about",children:Object(c.jsx)(dn,{})}),Object(c.jsx)(s.b,{exact:!0,path:"/post",children:j?Object(c.jsx)(yn,{}):Object(c.jsx)(s.a,{to:"/"})}),Object(c.jsx)(s.b,{exact:!0,path:"/login",children:j?Object(c.jsx)(s.a,{to:"/"}):Object(c.jsx)(kn,{})}),Object(c.jsx)(s.b,{exact:!0,path:"/register",children:j?Object(c.jsx)(s.a,{to:"/"}):Object(c.jsx)(Sn,{})})]})]})})}var zn=function(n){n&&n instanceof Function&&e.e(3).then(e.bind(null,37)).then((function(t){var e=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,o=t.getTTFB;e(n),c(n),r(n),a(n),o(n)}))};o.a.render(Object(c.jsx)(Cn,{}),document.getElementById("root")),zn()}},[[36,1,2]]]);
//# sourceMappingURL=main.e5e71066.chunk.js.map